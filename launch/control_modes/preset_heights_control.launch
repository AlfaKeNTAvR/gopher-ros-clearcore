<?xml version="1.0"?>
<launch>
    <!-- ============================ SETTINGS ============================= -->

    <!-- Node frequency: the frequency [Hz] which rate.sleep() function will
    attempt to maintain in the main_loop. -->
    <arg 
    name="node_frequency" 
    default="100"/>

    <!-- Controller side: can be either "right" or "left". -->
    <arg 
    name="controller_side" 
    default="right"/>

    <!-- Max speed fraction: maximum chest motion speed (0.01 - 1.0), which
    represents the fraction of the maximum chest speed. -->
    <arg 
    name="max_speed_fraction" 
    default="1.0"/>

    <!-- Start position (chest): move chest to starting position
    [meters]: [0.0 - 0.44]. If set to -1, no starting position is set and the
    chest stays at current position. -->
    <arg 
    name="start_position" 
    value="0.22"/>

    <!-- Preset heights number: the number of evenly distributed points along
    the chest motion range (0.0 - 0.44 m). The minimum number is 3: This will
    produce [0, 0.22, 0.44] preset heights. -->
    <arg name="preset_heights_number" 
    default="3"/>   

    <!-- Enable chest compensation for Kinova: Kinova EE stabilization based on
    the chest position. -->
    <arg 
    name="enable_chest_compensation_for_kinova" 
    default="false"/> 


    <!-- If any of dependency or optional subfiles should not be launched (or
    are launched separately) set corresponding argument to "false". -->
    <arg 
    name="launch_chest" 
    default="true"/>
    <arg 
    name="launch_controller_feedback" 
    default="true"/>

    <!-- ======================== END OF SETTINGS ========================== -->

    <!-- Chest modules (dependency): -->
    <group if="$(arg launch_chest)">
        <include 
        file="$(find gopher_ros_clearcore)/launch/chest.launch">
            <arg 
            name="start_position" 
            value="$(arg start_position)"/>
        </include>
    </group>

    <!-- Oculus controller feedback (dependency): -->
    <group if="$(arg launch_controller_feedback)">
        <include 
        file="$(find oculus_ros)/launch/controller_feedback.launch">
            <arg 
            name="controller_side" 
            value="$(arg controller_side)"/>
        </include>
    </group>

    <!-- Preset heights control module: -->s
    <node 
    pkg="gopher_ros_clearcore" 
    type="preset_heights_control.py" 
    name="preset_heights_control" 
    output="screen">
        <param 
        name="node_frequency" 
        value="$(arg node_frequency)"/>
        <param 
        name="controller_side" 
        value="$(arg controller_side)"/>
        <param 
        name="max_speed_fraction" 
        value="$(arg max_speed_fraction)"/>
        <param 
        name="preset_heights_number" 
        value="$(arg preset_heights_number)"/>
        <param 
        name="enable_chest_compensation_for_kinova" 
        value="$(arg enable_chest_compensation_for_kinova)"/>
    </node>
</launch>
